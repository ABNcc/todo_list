<!DOCTYPE html>
<html>
<head>
    <title>To Do List</title>
</head>
{% extends 'navbar.html' %}>
<body>
{% block content %}
<style>
    
@media (min-width: 1000px){
  #save{
    display: none;
  }
  }
</style>

<form method="POST" action="{% url 'add' %}">{% csrf_token %}
    {{ task_input }}
    {{ description_input }}
    <button type="submit" class="btn btn-primary" id="save">Save</button>
</form>
{% for task in tasks %}

{% if task|striptags == "" %}
<script>
    alert("Remove the '<>' tags to show the task");
</script>
{% endif %}

{% if task.completed == False %}
<div class="card" style="width: 18rem;">
    <br>
    <div class="card-body">
        <h4 class="card-title">{{ task.task|striptags|title }}</h4>
        <p class="card-text">{{ task.description|striptags|capfirst }}</p>
        <div class="d-grid gap-1 d-flex">
            <form method="POST" action="{% url 'completed' %}">
                <button type="submit" class="btn btn-outline-success btn-sm" name="done_id" value="{{ task.id }}">
                    Mark as completed
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16">
                        <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
                    </svg>
                </button>
            </form>
            <form action="{% url 'delete' %}" method="POST">
                <button type="submit" class="btn btn-outline-danger btn-sm" name="task_id" value="{{ task.id }}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                         class="bi bi-journal-x" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                              d="M6.146 6.146a.5.5 0 0 1 .708 0L8 7.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 8l1.147 1.146a.5.5 0 0 1-.708.708L8 8.707 6.854 9.854a.5.5 0 0 1-.708-.708L7.293 8 6.146 6.854a.5.5 0 0 1 0-.708z"></path>
                        <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"></path>
                        <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"></path>
                    </svg>
                    Delete
                </button>
            </form>
        </div>
    </div>
</div>
{% else %}
<div class="cardsecondary" style="width: 18rem;">
    <br>
    <div class="card-body" style="color: grey;">
        <h4 class="card-title text-decoration-line-through">{{ task.task|striptags|title }}</h4>
        <p class="card-text">{{ task.description|striptags|capfirst }}</p>
        <div class="d-grid gap-1 d-flex">
            <form action="{% url 'delete' %}" method="POST">
                <button type="submit" class="btn btn-outline-danger btn-sm" name="task_id" value="{{ task.id }}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                         class="bi bi-journal-x" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                              d="M6.146 6.146a.5.5 0 0 1 .708 0L8 7.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 8l1.147 1.146a.5.5 0 0 1-.708.708L8 8.707 6.854 9.854a.5.5 0 0 1-.708-.708L7.293 8 6.146 6.854a.5.5 0 0 1 0-.708z"></path>
                        <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"></path>
                        <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"></path>
                    </svg>
                    Delete
                </button>
            </form>
        </div>
    </div>
</div>
{% endif %}
{% empty %}
<img src="https://ihome.agency/en/images/empty-list.png" alt="Looks like you have nothing To Do!" 
       class="img-fluid position-absolute top-50 start-50 translate-middle" id="img">
{% endfor %}
{% endblock %}
</body>
</html>